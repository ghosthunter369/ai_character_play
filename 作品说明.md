#  AI 角色扮演网页 — 设计、架构与实现

## 概览

开发一个支持语音聊天的 AI 角色扮演网页。用户可以搜索并选择感兴趣的角色（例如哈利·波特、苏格拉底、福尔摩斯等），与角色进行实时语音对话。系统只允许调用 LLM（文本生成）、语音识别（ASR）与文本转语音（TTS），**不得**使用第三方 Agent 能力（即不要把动作分配给外部 Agent、工具链或插件式执行器）。

---

## 1) 面向用户画像、痛点与用户故事

### 目标用户类型

1. 爱好者 / 粉丝：想与虚构或历史人物互动（例如文学爱好者、影迷）。
2. 学习者 / 学生：想通过角色扮演来练习语言、历史讨论或问答训练（例如用苏格拉底练逻辑问答）。
3. 教师 / 培训师：用角色来做课堂演示、模拟面试或情景教学。
4. 产品体验者 / 娱乐用户：寻找有趣的语音交互体验（即刻娱乐）。

### 他们的痛点

- 现有体验千篇一律，缺少“角色感”与持续上下文记忆。
- 语音交互延迟、识别不准或语音合成不自然，破坏沉浸感。
- 角色回答过于机械或偏离“性格”，缺少风格控制（情绪、口吻、知识范围）。

### 用户故事（示例）

- 作为一个哈利·波特粉，我希望系统按《哈利·波特》的世界观设定角色口吻，这样对话才有代入感。
- 作为一名哲学学生，我想用“苏格拉底模式”练习提问与反问，并且让系统记录上下文，这样我能把对话延续到下一次练习。
- 作为一个英语学习者，我想和莎士比亚角色对话，从而在趣味场景里练习我的英语口语。

---

## 2) 功能清单与优先级

### 必要（P0）

- 角色库（可搜索）与角色元数据（角色描述、开场白）。
- 支持用户创建自定义角色。
- 语音输入（ASR）与语音输出（TTS）
- LLM 驱动的对话引擎（支持角色系统提示）。
- 基本 UI：选择角色、开始/停止对话、显示文字转录与历史。

### 强化（P1）

- 多模态支持（例如允许上传短音频或文本上下文）。

- 模式切换（故事模式 / 测验模式 / 旁听者模式 / 苏格拉底式反问）。

- 会话记忆（短期与可选的长期记忆开关）。

- 会话导出功能。

- 语气/情绪切换（正式/幽默/愤怒/温柔）。

### 进阶（P2）

- 多角色对话（同时扮演 2 个角色互动）。

- 可定制化的声音合成（上传自定义音色/克隆声线，需合法授权）。

### 本次开发计划（MVP）

开发 P0 和部分P1：

1. **角色搜索与选择**：含多个内建示例角色，至少包括：哈利·波特、苏格拉底、福尔摩斯。
2. **语音聊天**：支持语音输入（ASR）、语言理解与生成（LLM）、语音输出（TTS）的完整对话闭环。
3. **会话记忆**（短期与可选的长期记忆开关）。
4. **会话导出**：支持导出对话记录，便于保存和分享。
5. **前端展示**：TTS 播放同步显示文字转录及历史记录。

## 3) LLM 模型选择与对比

### 候选项

- **OpenAI**（GPT 系列，含 GPT-4o-mini、gpt-4o 等，且具备 TTS 辅助模型）。

- **Google DeepMind Gemini**（Live API 提供原生音频能力，适合低延迟语音对话）。

- **Anthropic Claude**（Claude 3 家族以长上下文与稳健的指令遵循著称）。

- **阿里云百炼千问 Plus**（国内 LLM，支持中文语义理解与生成，可结合企业内部数据）。

- **讯飞实时语音转写大模型 + 超拟人语音合成**（适合中文语音输入输出，低延迟、拟人化发音）。

### 我选择的模型

- 推荐：**阿里云百炼千问 Plus** + **讯飞**（实时语音转写 + 超拟人语音合成）

**原因**（简明）：

1. **阿里云百炼千问 Plus**
   - 中文语义理解和生成能力优秀，适合国内用户。
   - 支持企业数据接入，可做个性化知识增强。
   - API 稳定、延迟低，便于快速搭建角色扮演对话系统。
2. **讯飞实时语音转写 + 超拟人语音合成**
   - 实时语音输入低延迟、准确率高。
   - 输出语音自然、拟人化，适合角色扮演场景。
   - 支持端到端语音交互，可直接和 LLM 对接。
3. **整体组合理由**
   - **阿里云 LLM** → 提供中文对话能力、知识增强。
   - **讯飞语音能力** → 提供高质量的语音输入输出，实现真实角色扮演体验。

---

## 4) 期望 AI 角色除了语音聊天外应具备的技能

1. **风格/情绪切换**（例如：幽默 / 正式 / 苏格拉底式反问） 
2. **故事生成与分支**（交互式“你选 A 还是 B”的冒险故事）
3. **测验/出题与即时评分**（问答题、选择题，AI 扮演考官并给出分数/反馈） 
4. **简短记忆/上下文保持**（保留最近 N 轮或开启长期记忆选项）
5. **文本对话**（支持前端显示文字转录，增强阅读与回放体验）
6. **交互式猜谜**（AI 角色可引导用户进行“猜谜”或“猜物品”类互动，通过语音或文本形式提示用户）

